<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>冷氣機工作原理互動示範 Air Conditioning Working Principle</title>
    <meta name="description" content="冷氣機工作原理互動式示範，詳細解析蒸氣壓縮製冷循環的四個關鍵組件：壓縮機、冷凝器、膨脹閥和蒸發器。透過動態SVG圖示，直觀了解冷媒的狀態變化與熱量搬運過程。">
    <meta name="keywords" content="冷氣機原理, 製冷循環, 蒸氣壓縮, 壓縮機, 冷凝器, 膨脹閥, 蒸發器, 冷媒, 空調運作, HVAC, 互動模擬">
    <meta name="robots" content="index, follow">

    <script src="https://cdn.tailwindcss.com"></script>
      <script src="load_index_common.js"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', system-ui, -apple-system, sans-serif;
            background-color: #f0f4f8;
        }

        /* SVG 動畫定義 */
        .flow-line {
            fill: none;
            stroke-width: 12;
            stroke-linecap: round;
            stroke-dasharray: 20, 10;
            opacity: 0.6;
            transition: stroke 1s;
        }

        .fan-blade {
            transform-box: fill-box;
            transform-origin: center;
        }

        .spinning {
            animation: spin 0.8s linear infinite;
        }

        .spinning-slow {
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* 流動動畫 */
        @keyframes flowAnimation {
            to { stroke-dashoffset: -30; }
        }

        .flowing {
            animation: flowAnimation 1s linear infinite;
        }
        
        .flowing-fast {
            animation: flowAnimation 0.5s linear infinite;
        }

        /* 組件互動樣式 */
        .component-group {
            cursor: pointer;
            transition: opacity 0.3s;
        }
        .component-group:hover {
            opacity: 0.8;
            filter: drop-shadow(0 0 5px rgba(0,0,0,0.3));
        }

        .tooltip-box {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            pointer-events: none;
            display: none;
            z-index: 50;
            max-width: 300px;
        }
        
        .info-panel {
            transition: all 0.3s ease;
        }

        /* 區域背景 */
        .indoor-zone {
            fill: #e0f2fe; /* Light Blue 50 */
            opacity: 0.5;
        }
        .outdoor-zone {
            fill: #fff7ed; /* Orange 50 */
            opacity: 0.5;
        }
        
        /* 粒子 */
        .particle {
            fill: white;
            opacity: 0.7;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4">

    <header class="text-center mb-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-2">冷氣機工作原理 (製冷循環)</h1>
        <p class="text-gray-600">互動式動態示範：點擊開關並懸停組件以了解詳情</p>
    </header>

    <div class="flex flex-col lg:flex-row gap-6 w-full max-w-6xl">
        
        <div class="w-full lg:w-1/3 flex flex-col gap-4">
            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200">
                <h2 class="text-xl font-bold mb-4 text-gray-700 flex items-center gap-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                    遙控器
                </h2>
                
                <div class="flex justify-between items-center mb-6">
                    <span class="text-gray-600 font-medium">電源開關</span>
                    <button id="powerBtn" class="bg-gray-300 text-gray-500 px-6 py-2 rounded-full font-bold transition-colors hover:bg-gray-400">OFF</button>
                </div>

                <div class="mb-6">
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-600">設定溫度</span>
                        <span id="targetTempDisplay" class="text-blue-600 font-bold text-xl">25°C</span>
                    </div>
                    <input type="range" id="tempSlider" min="16" max="30" value="25" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500">
                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                        <span>16°C</span>
                        <span>30°C</span>
                    </div>
                </div>

                <div class="border-t pt-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-600">當前室溫</span>
                        <span id="roomTempDisplay" class="text-gray-800 font-bold text-2xl">28.0°C</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="tempBar" class="bg-red-400 h-2.5 rounded-full transition-all duration-500" style="width: 80%"></div>
                    </div>
                    <p id="statusText" class="text-sm text-gray-500 mt-2 text-right">系統待機中</p>
                </div>
            </div>


            <div id="infoPanel" class="bg-blue-50 p-6 rounded-xl shadow-sm border border-blue-100 flex-grow info-panel">
                <h3 id="infoTitle" class="text-lg font-bold text-blue-800 mb-2">系統概覽</h3>
                <p id="infoDesc" class="text-blue-900 leading-relaxed text-sm">
                    這是一個蒸氣壓縮製冷循環系統。冷媒在系統中循環，透過狀態變化（氣態/液態）與壓力變化來搬運熱量。<br><br>
                    請開啟電源並將滑鼠移動到圖中各個部件（壓縮機、冷凝器等）查看詳細功能。
                </p>
                
                <div class="mt-4 grid grid-cols-2 gap-2 text-xs">
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-red-500"></div>高壓高溫氣體</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-orange-400"></div>高壓中溫液體</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-blue-600"></div>低壓低溫液體(霧狀)</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-sky-300"></div>低壓低溫氣體</div>
                </div>
            </div>
        </div>


        <div class="w-full lg:w-2/3 bg-white rounded-xl shadow-md border border-gray-200 relative overflow-hidden">

            <div id="tooltip" class="tooltip-box">
                <h4 class="font-bold text-gray-800 mb-1">標題</h4>
                <p class="text-sm text-gray-600">內容</p>
            </div>

            <svg viewBox="0 0 800 500" class="w-full h-auto select-none">
                <rect x="0" y="0" width="400" height="500" class="indoor-zone" />
                <rect x="400" y="0" width="400" height="500" class="outdoor-zone" />
                
                <text x="20" y="30" class="font-bold text-blue-800 text-lg">室內機 (蒸發器)</text>
                <text x="780" y="30" class="font-bold text-orange-800 text-lg" text-anchor="end">室外機 (冷凝器)</text>

                <defs>
                    <marker id="arrow" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                        <path d="M0,0 L10,5 L0,10" fill="#666" />
                    </marker>
                    <symbol id="compressor-icon" viewBox="0 0 60 60">
                        <path d="M15,10 h30 a10,10 0 0 1 10,10 v30 a5,5 0 0 1 -5,5 h-40 a5,5 0 0 1 -5,-5 v-30 a10,10 0 0 1 10,-10 z" fill="#333" />
                        <rect x="25" y="0" width="10" height="10" fill="#555" />
                    </symbol>
                </defs>

                <path id="pipe-hot-gas" d="M430,400 L430,350 L700,350 L700,300" 
                      class="flow-line" stroke="#ef4444" />

                <path id="coil-condenser" d="M700,300 L650,300 L650,250 L750,250 L750,200 L650,200 L650,150 L700,150" 
                      class="flow-line" stroke="#f97316" /> <!-- Orange gradient usually better but solid for schematic -->

                <path id="pipe-liquid" d="M700,150 L700,100 L450,100" 
                      class="flow-line" stroke="#f97316" />

                <path id="pipe-expansion" d="M400,100 L350,100 L350,150 L150,150" 
                      class="flow-line" stroke="#2563eb" />

                <path id="coil-evaporator" d="M150,150 L250,150 L250,200 L100,200 L100,250 L250,250 L250,300 L150,300" 
                      class="flow-line" stroke="#3b82f6" />

                <path id="pipe-cool-gas" d="M150,300 L150,420 L370,420" 
                      class="flow-line" stroke="#7dd3fc" />

                <g id="comp-group" class="component-group" transform="translate(370, 390)">
                    <rect x="0" y="0" width="60" height="70" rx="5" fill="#475569" stroke="#333" stroke-width="2" />
                    <text x="30" y="40" text-anchor="middle" fill="white" font-size="12" font-weight="bold">壓縮機</text>
                    <circle cx="30" cy="55" r="5" fill="#22c55e" class="status-light opacity-50" />
                </g>

                <g id="cond-group" class="component-group" transform="translate(620, 140)">
                    <rect x="0" y="0" width="160" height="180" rx="5" fill="none" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,5" />
                    <text x="80" y="-10" text-anchor="middle" fill="#c2410c" font-size="14" font-weight="bold">冷凝器 (散熱)</text>
                    
                    <g class="fan-blade" id="outdoor-fan" transform="translate(80, 90)">
                        <path d="M0,0 C20,-30 40,-30 50,0 C40,30 20,30 0,0" fill="#4b5563" opacity="0.8" transform="rotate(0)"/>
                        <path d="M0,0 C20,-30 40,-30 50,0 C40,30 20,30 0,0" fill="#4b5563" opacity="0.8" transform="rotate(120)"/>
                        <path d="M0,0 C20,-30 40,-30 50,0 C40,30 20,30 0,0" fill="#4b5563" opacity="0.8" transform="rotate(240)"/>
                        <circle cx="0" cy="0" r="5" fill="#333" />
                    </g>
                    <g id="heat-lines" opacity="0">
                        <path d="M170,50 L190,40" stroke="red" stroke-width="2" />
                        <path d="M170,90 L200,90" stroke="red" stroke-width="2" />
                        <path d="M170,130 L190,140" stroke="red" stroke-width="2" />
                    </g>
                </g>

                <g id="exp-group" class="component-group" transform="translate(400, 80)">
                    <path d="M0,0 L50,0 L25,40 Z" fill="#94a3b8" />
                    <path d="M0,40 L50,40 L25,0 Z" fill="#94a3b8" />
                    <rect x="20" y="15" width="10" height="10" fill="#475569" />
                    <text x="25" y="-10" text-anchor="middle" fill="#334155" font-size="12" font-weight="bold">膨脹閥</text>
                </g>

                <g id="evap-group" class="component-group" transform="translate(80, 140)">
                    <rect x="0" y="0" width="190" height="180" rx="5" fill="none" stroke="#9ca3af" stroke-width="2" stroke-dasharray="5,5" />
                    <text x="95" y="-10" text-anchor="middle" fill="#0369a1" font-size="14" font-weight="bold">蒸發器 (吸熱)</text>

                    <rect x="20" y="20" width="150" height="140" fill="url(#fanGradient)" opacity="0.2" />
                    <g class="fan-blade" id="indoor-fan" transform="translate(95, 90)">
                        <circle cx="0" cy="0" r="40" stroke="#333" stroke-width="2" stroke-dasharray="5,5" fill="none" />
                        <line x1="-40" y1="0" x2="40" y2="0" stroke="#333" stroke-width="1" />
                        <line x1="0" y1="-40" x2="0" y2="40" stroke="#333" stroke-width="1" />
                    </g>
                    <g id="cold-lines" opacity="0">
                        <path d="M-10,50 L-30,40" stroke="blue" stroke-width="2" />
                        <path d="M-10,90 L-40,90" stroke="blue" stroke-width="2" />
                        <path d="M-10,130 L-30,140" stroke="blue" stroke-width="2" />
                    </g>
                </g>
            </svg>
        </div>
    </div>

    <div class="w-full max-w-6xl mt-8 bg-white p-6 rounded-xl shadow-md border border-gray-200">
        <h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">冷氣機如何運作？蒸氣壓縮製冷循環詳解</h2>
        <p class="text-gray-700 mb-4 leading-relaxed">
            冷氣機的運作核心在於蒸氣壓縮製冷循環 (Vapor-Compression Refrigeration Cycle)，它並非製造冷空氣，而是利用冷媒（雪種）的物理特性，將室內的熱量「搬運」到室外。這個精密的熱力學循環包含四個關鍵步驟和組件，在圖上可以看到其對應的冷媒狀態變化。
        </p>

        <h3 class="text-xl font-semibold text-gray-700 mt-4 mb-2">循環四步驟</h3>
        <ol class="list-decimal list-inside space-y-3 text-gray-600 pl-4">
            <li>
                <strong>壓縮 (Compression) - 壓縮機：</strong> 
                冷媒以低溫、低壓的氣態進入壓縮機。壓縮機對其作功，將氣體壓縮成高溫、高壓的氣體。這一步是整個循環中能量最高的狀態。
            </li>
            <li>
                <strong>冷凝 (Condensation) - 冷凝器 (室外機)：</strong> 
                高溫高壓的冷媒氣體流經室外機的冷凝器盤管。由於其溫度遠高於室外空氣，透過風扇輔助，冷媒釋放熱量並冷卻，從氣態轉變為高壓、中溫的液體。
            </li>
            <li>
                <strong>膨脹/節流 (Expansion/Throttling) - 膨脹閥：</strong> 
                高壓液態冷媒流經膨脹閥（或毛細管），體積迅速擴大，壓力瞬間大幅降低。在熱力學上，壓力的驟降使其溫度隨之下降，轉變成低壓、低溫的霧狀液體與氣體混合物。
            </li>
            <li>
                <strong>蒸發 (Evaporation) - 蒸發器 (室內機)：</strong> 
                低溫低壓的冷媒進入室內機的蒸發器盤管。室內空氣流經蒸發器，將熱量傳遞給冷媒。冷媒吸熱後從液態完全蒸發成低壓、低溫的氣體。被冷媒吸走熱量的空氣則被室內風扇吹出，達到製冷效果。隨後，此氣態冷媒再次被吸入壓縮機，完成一個循環。
            </li>
        </ol>

        <p class="text-gray-700 mt-4 leading-relaxed">
            本互動示範透過顏色線條（紅色代表高熱、藍色代表低冷）和動態風扇，直觀地展示了這個熱量搬運過程。您可透過模擬控制室溫和設定溫度，觀察變頻壓縮機如何根據溫差調整運轉狀態，實現節能效果。
        </p>
    </div>

    <script>
        let isOn=!1,targetTemp=25,roomTemp=28,compressorActive=!1,simulationInterval;const powerBtn=document.getElementById("powerBtn"),tempSlider=document.getElementById("tempSlider"),targetTempDisplay=document.getElementById("targetTempDisplay"),roomTempDisplay=document.getElementById("roomTempDisplay"),tempBar=document.getElementById("tempBar"),statusText=document.getElementById("statusText"),outdoorFan=document.getElementById("outdoor-fan"),indoorFan=document.getElementById("indoor-fan"),flowLines=document.querySelectorAll(".flow-line"),compStatusLight=document.querySelector("#comp-group .status-light"),heatLines=document.getElementById("heat-lines"),coldLines=document.getElementById("cold-lines"),componentData={"comp-group":{title:"壓縮機 (心臟)",desc:"將低溫低壓的氣態冷媒壓縮成高溫高壓的氣體。這是最耗電的部件，透過對氣體作功增加能量。"},"cond-group":{title:"冷凝器 (室外機)",desc:"高溫高壓的氣體流經此處，透過風扇將熱量排放到戶外，冷媒冷卻並凝結成高壓液體（放熱過程）。"},"exp-group":{title:"膨脹閥/毛細管",desc:"讓高壓液體通過狹窄通道，壓力瞬間驟降。冷媒在此變成低壓低溫的霧狀液體（準備吸熱）。"},"evap-group":{title:"蒸發器 (室內機)",desc:"低溫冷媒流經此處，吸收室內空氣的熱量並蒸發成氣體。室內風扇吹出的空氣因此變冷。"}},tooltip=document.getElementById("tooltip"),infoTitle=document.getElementById("infoTitle"),infoDesc=document.getElementById("infoDesc");function togglePower(){(isOn=!isOn)?(powerBtn.textContent="ON",powerBtn.classList.remove("bg-gray-300","text-gray-500"),powerBtn.classList.add("bg-green-500","text-white"),startSimulation()):(powerBtn.textContent="OFF",powerBtn.classList.add("bg-gray-300","text-gray-500"),powerBtn.classList.remove("bg-green-500","text-white"),stopSimulation()),updateSystemState()}function updateSystemState(){if(!isOn){setCompressor(!1),indoorFan.classList.remove("spinning","spinning-slow"),statusText.textContent="系統已關閉",coldLines.style.opacity=0;return}roomTemp>targetTemp?(setCompressor(!0),statusText.textContent="製冷中 - 壓縮機運轉",indoorFan.classList.remove("spinning-slow"),indoorFan.classList.add("spinning"),coldLines.style.opacity=1):(setCompressor(!1),statusText.textContent="已達設定溫度 - 送風模式",indoorFan.classList.remove("spinning"),indoorFan.classList.add("spinning-slow"),coldLines.style.opacity=0)}function setCompressor(t){compressorActive=t,t?(outdoorFan.classList.add("spinning"),flowLines.forEach(t=>t.classList.add("flowing")),compStatusLight.classList.remove("opacity-50"),compStatusLight.setAttribute("fill","#00ff00"),heatLines.style.opacity=1):(outdoorFan.classList.remove("spinning"),flowLines.forEach(t=>t.classList.remove("flowing")),compStatusLight.classList.add("opacity-50"),compStatusLight.setAttribute("fill","#22c55e"),heatLines.style.opacity=0)}function startSimulation(){simulationInterval&&clearInterval(simulationInterval),simulationInterval=setInterval(()=>{if(!isOn)return;compressorActive&&roomTemp>targetTemp?roomTemp-=.05:!compressorActive&&roomTemp<32&&(roomTemp+=.02),roomTemp<16&&(roomTemp=16),roomTempDisplay.textContent=roomTemp.toFixed(1)+"\xb0C";let t=(roomTemp-16)/16*100;tempBar.style.width=`${Math.min(100,Math.max(0,t))}%`,roomTemp>26?tempBar.className="h-2.5 rounded-full transition-all duration-500 bg-red-400":roomTemp>22?tempBar.className="h-2.5 rounded-full transition-all duration-500 bg-yellow-400":tempBar.className="h-2.5 rounded-full transition-all duration-500 bg-blue-400",updateSystemState()},200)}function stopSimulation(){clearInterval(simulationInterval),compressorActive=!1}document.querySelectorAll(".component-group").forEach(t=>{t.addEventListener("mouseenter",e=>{let o=t.id,n=componentData[o];tooltip.style.display="block",tooltip.querySelector("h4").textContent=n.title,tooltip.querySelector("p").textContent=n.desc,infoTitle.textContent=n.title,infoDesc.textContent=n.desc,infoDesc.parentElement.classList.add("bg-yellow-50","border-yellow-200"),infoDesc.parentElement.classList.remove("bg-blue-50","border-blue-100")}),t.addEventListener("mousemove",t=>{let e=document.querySelector("svg").getBoundingClientRect(),o=t.clientX-e.left+15,n=t.clientY-e.top+15;o>e.width-200&&(o-=220),tooltip.style.left=o+"px",tooltip.style.top=n+"px"}),t.addEventListener("mouseleave",()=>{tooltip.style.display="none",infoTitle.textContent="系統概覽",infoDesc.textContent="這是一個蒸氣壓縮製冷循環系統。冷媒在系統中循環，透過狀態變化（氣態/液態）與壓力變化來搬運熱量。",infoDesc.parentElement.classList.remove("bg-yellow-50","border-yellow-200"),infoDesc.parentElement.classList.add("bg-blue-50","border-blue-100")})}),powerBtn.addEventListener("click",togglePower),tempSlider.addEventListener("input",t=>{targetTemp=parseInt(t.target.value),targetTempDisplay.textContent=targetTemp+"\xb0C",updateSystemState()});

    </script>
</body>
</html>